<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
        <meta name="description" content="">
        <meta name="author" content="">

        <title>Thales PR</title>

        <!-- Bootstrap core CSS -->
        <link href="./bootstrap-3.3.6-dist/css/bootstrap.min.css" rel="stylesheet">

        <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
        <link href="./bootstrap-3.3.6-dist/css/ie10-viewport-bug-workaround.css" rel="stylesheet">

        <!-- Custom styles for this template -->
        <link href="./style.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
          <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
          <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
        <![endif]-->
    </head>

  <body>

    <!--Inclusion pour le Leap Motion-->
    <script src="https://rawgithub.com/mrdoob/three.js/master/build/three.js"></script>
    <script src="http://js.leapmotion.com/0.2.0/leap.min.js"></script>
    <script src="https://code.jquery.com/jquery-2.1.0.min.js"?></script>
    <script type="text/javascript" src="./scripts/donnees_leap.js"></script>

    <script>           
        //Gère les initialisations des boutons
        $(document).ready(function()
        {
            displayData = false;
        });

        //Chargement des positions des postits à partir du localStorage
        var monobjet_json = localStorage.getItem("positions1");
        if(monobjet_json != null)
        {
            positions1 = JSON.parse(monobjet_json);
            plane1 = createPlane(plane1,positions1);
        }
        monobjet_json = localStorage.getItem("positions2");
        if(monobjet_json != null)
        {
            positions2 = JSON.parse(monobjet_json);
            plane2 = createPlane(plane2,positions2);
        }
    </script>

    <div class="site-wrapper">
        <div class="site-wrapper-inner">
            <div class="cover-container">
                <div class="masthead clearfix">
                    <div class="inner">
                        <h1 class="masthead-brand"></h1>
                    </div>
                </div>

                <div class="inner cover">
                    <div id="score">0/0</div>
                    <div id="test">
                    </div>
        
                    <div id="buttons">
                        <a href="#" onclick="next_yes()" class="btn btn-lg btn-default">Oui</a>
                        <a href="#" onclick="next_no()" class="btn btn-lg btn-default">Non</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="./bootstrap-3.3.6-dist/js/jquery.min.js"><\/script>')</script>
    <script src="./bootstrap-3.3.6-dist/js/bootstrap.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="./bootstrap-3.3.6-dist/js/ie10-viewport-bug-workaround.js"></script>
    
    <script type="text/javascript">
    var table = [
    	new Array("Le rond est bleu ?","circle-red","false"),
    	new Array("Le rectangle est vert ?","rectangle-green","true"),
    	new Array("Le rond est rouge ?","circle-blue","false"),
    	new Array("Le triangle est vert ?","triangle-up-red","false"),
    	new Array("Le rectangle est bleu ?","rectangle-blue","true"),
    	];
    	
    var parameters = location.search.substring(1).split("&");
    var temp = parameters[0].split("=");
    var pseudo = unescape(temp[1]);
    temp = parameters[1].split("=");
	var score_tactile = unescape(temp[1]);
    temp = parameters[2].split("=");
	var compteur_tactile = unescape(temp[1]);
		    
    var compteur = 1;
    var max = 10;
    var i=0;
    var score=0;
    
    i = Math.floor(Math.random()*table.length);
	document.getElementById("test").innerHTML = '<h3>'+table[i][0]+'</h3><div id="'+table[i][1]+'"></div>';
	document.getElementById("score").innerHTML = score+'/'+(compteur-1);


    function touch_yes()
    {
        next_yes();
    }

    function touch_no()
    {
        next_no();
    }

    function next_yes() {
    	compteur++;
    	
    	if(compteur==max) {
	    	document.location.href = 'score.html?pseudo='+pseudo+'&score_tactile='+score_tactile+'&compteur_tactile='+compteur_tactile+'&score_leap='+score+'&compteur_leap='+max;
    	} 
        else {
	    	if(table[i][2] == "true") {
	    		score++;
	    	}
		    	i = Math.floor(Math.random()*table.length);
			    document.getElementById("test").innerHTML = '<h3>'+table[i][0]+'</h3><div id="'+table[i][1]+'"></div>';
			    document.getElementById("score").innerHTML = score+'/'+(compteur-1);
	    }
    }
    
    function next_no() {
    	compteur++;
    	
    	if(compteur==max) {
	    	document.location.href = 'score.html?pseudo='+pseudo+'&score_tactile='+score_tactile+'&compteur_tactile='+compteur_tactile+'&score_leap='+score+'&compteur_leap='+max;
    	} 
        else {
	    	if(table[i][2] == "false") {
	    		score++;
	    	}
	    	i = Math.floor(Math.random()*table.length);
		    document.getElementById("test").innerHTML = '<h3>'+table[i][0]+'</h3><div id="'+table[i][1]+'"></div>';
			    document.getElementById("score").innerHTML = score+'/'+(compteur-1)  ;
	    }
    }
    </script>
  </body>
</html>
